import{_ as f,M as b,a as x,r as M,o as F,c as y,b as r,d as o,F as k,e as g,f as e,n as O,t as n,w as D,g as a,h as w,i as _,j as I,T as C,k as m,l as H,m as L,p as T,q as S,s as B,u as U,v as q,x as V}from"./index-BpthYSgD.js";const j={name:"ProductsData",components:{Modal:b,ModalHeader:x},data(){return{removeIcon:M,showModal:!1,selectedProduct:null}},props:{products:{type:Array,required:!0},visibleProducts:{type:Boolean}},methods:{openModal:F,closeModal:y,confirmDeleteProduct(){this.selectedProduct&&(this.$emit("deleteProduct",this.selectedProduct.id),this.selectedProduct=null,this.showModal=!1)}}},R={key:0,class:"no-products"},z={key:1},E=["src","alt"],G={class:"selected-product__name"},X={class:"product-specification"},J={class:"product-status"},K={key:0,style:{color:"#55a45e"}},Q={key:1},W=["src","onClick"];function Y(d,c,s,P,l,t){const u=m("ModalHeader"),v=m("Modal");return r(),o("div",null,[s.products.length===0?(r(),o("div",R,"No products")):(r(),o("div",z,[(r(!0),o(k,null,g(s.products,i=>(r(),o("div",{key:i.id,class:"product"},[e("img",{class:"product-icon",src:i.img,alt:i.name},null,8,E),e("div",{class:O(["product-circle",{free:i.isFree}])},null,2),e("div",G,[e("p",null,n(i.name),1),e("span",null,"S/N "+n(i.sn),1)]),e("p",X,n(i.specification),1),e("div",J,[i.isFree?(r(),o("p",K,"Free")):(r(),o("p",Q,"Under repair"))]),e("div",null,[s.visibleProducts?(r(),o("img",{key:0,class:O(["remove-icon",{"remove-icon__act":s.visibleProducts}]),src:l.removeIcon,alt:"remove",onClick:D(h=>t.openModal(i),["stop"])},null,10,W)):a("",!0)])]))),128))])),(r(),w(C,{to:"#modals"},[_(v,{order:l.selectedProduct,show:l.showModal,title:"product",onDelete:t.confirmDeleteProduct,onClose:t.closeModal},{default:I(()=>[_(u,{selectedProduct:l.selectedProduct},null,8,["selectedProduct"])]),_:1},8,["order","show","onDelete","onClose"])]))])}const Z=f(j,[["render",Y],["__scopeId","data-v-7b6ec1ad"]]),$={data(){return{removeIcon:M}},props:{order:{type:Object,required:!0},visibleProducts:{type:Boolean,default:!1},selectedOrderId:{type:[Number,String],default:null}},methods:{selectOrder(){this.$emit("selectOrder",this.order.id)},formatDate:H,totalAmount:L,convertToUAH:T}},A=d=>(S("data-v-14c5c43c"),d=d(),B(),d),ee={key:0,class:"order-name"},se={class:"order-length"},te=A(()=>e("span",null,"Products",-1)),re={class:"order-date"},de={key:1,class:"order-price"},oe=["src"],le={key:3,class:"order-snape"},ce=A(()=>e("span",null,">",-1)),ie=[ce];function ne(d,c,s,P,l,t){return r(),o("div",{class:O(["order",{min:s.visibleProducts}]),onClick:c[1]||(c[1]=(...u)=>t.selectOrder&&t.selectOrder(...u))},[s.visibleProducts?a("",!0):(r(),o("p",ee,n(s.order.title),1)),e("div",se,[e("p",null,n(s.order.products.length),1),te]),e("div",re,[e("span",null,n(t.formatDate(s.order.date,"short")),1),e("p",null,n(t.formatDate(s.order.date,"long")),1)]),s.visibleProducts?a("",!0):(r(),o("div",de,[e("span",null,n(t.totalAmount(s.order.products))+"$",1),e("p",null,n(t.convertToUAH(t.totalAmount(s.order.products)))+" UA",1)])),s.visibleProducts?a("",!0):(r(),o("img",{key:2,class:"remove-icon",src:l.removeIcon,alt:"remove",onClick:c[0]||(c[0]=D(u=>d.$emit("removeOrder",s.order),["stop"]))},null,8,oe)),s.visibleProducts&&s.order.id===s.selectedOrderId?(r(),o("div",le,ie)):a("",!0)],2)}const ae=f($,[["render",ne],["__scopeId","data-v-14c5c43c"]]),ue={name:"OrdersPage",components:{Products:Z,Modal:b,OrderList:ae},data(){return{selectedOrder:null,visibleProducts:!1,showModal:!1}},computed:{...U("data",["products"]),...q("data",["getOrders"]),orders(){return this.getOrders}},methods:{...V("data",["removeOrderById"]),closeOrder(){this.selectedOrder=null,this.visibleProducts=!1},openModal(d){this.selectedOrder=d,this.showModal=!0},closeModal:y,confirmDeleteOrder(){this.removeOrderById(this.selectedOrder.id),this.selectedOrder=null,this.showModal=!1},handleDeleteProduct(d){this.selectedOrder&&(this.selectedOrder.products=this.selectedOrder.products.filter(c=>c.id!==d),this.selectedOrder.products.length===0&&(this.removeOrderById(this.selectedOrder.id),this.selectedOrder=null,this.visibleProducts=!1))},selectOrder(d){var c;((c=this.selectedOrder)==null?void 0:c.id)===d?(this.closeOrder(),this.visibleProducts=!1):(this.selectedOrder=this.orders.find(s=>s.id===d),this.visibleProducts=!0)}}},N=d=>(S("data-v-36975d12"),d=d(),B(),d),_e={class:"order-container"},he={class:"order-title"},me=N(()=>e("h1",null,"Orders /",-1)),ve={class:"order-info"},Oe={key:0,class:"order-details"},fe={class:"selected-order__title"},Pe={key:0},pe=N(()=>e("h1",null,"No orders at the moment",-1)),be=[pe];function Me(d,c,s,P,l,t){const u=m("OrderList"),v=m("Products"),i=m("Modal");return r(),o("div",_e,[e("div",he,[me,e("span",null,n(t.orders.length),1)]),e("div",ve,[e("ul",null,[(r(!0),o(k,null,g(t.orders,h=>{var p;return r(),o("li",{class:"order-list",key:h.id},[_(u,{order:h,visibleProducts:l.visibleProducts,selectedOrderId:(p=l.selectedOrder)==null?void 0:p.id,onSelectOrder:t.selectOrder,onRemoveOrder:t.openModal},null,8,["order","visibleProducts","selectedOrderId","onSelectOrder","onRemoveOrder"])])}),128))]),l.visibleProducts?(r(),o("div",Oe,[e("div",{class:"close",onClick:c[0]||(c[0]=(...h)=>t.closeOrder&&t.closeOrder(...h))},"X"),e("h2",fe,n(l.selectedOrder.title),1),_(v,{products:l.selectedOrder.products,visibleProducts:l.visibleProducts,onDeleteProduct:t.handleDeleteProduct},null,8,["products","visibleProducts","onDeleteProduct"])])):a("",!0)]),t.orders.length===0?(r(),o("div",Pe,be)):a("",!0),(r(),w(C,{to:"#modals"},[_(i,{order:l.selectedOrder,show:l.showModal,title:"order",onDelete:t.confirmDeleteOrder,onClose:t.closeModal},{default:I(()=>[_(v,{products:l.selectedOrder.products},null,8,["products"])]),_:1},8,["order","show","onDelete","onClose"])]))])}const ke=f(ue,[["render",Me],["__scopeId","data-v-36975d12"]]);export{ke as default};
